{"ast":null,"code":"import _objectSpread from \"K:\\\\ALevel\\\\REACT\\\\shop-project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"K:\\\\ALevel\\\\REACT\\\\shop-project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"K:\\\\ALevel\\\\REACT\\\\shop-project\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"K:\\\\ALevel\\\\REACT\\\\shop-project\\\\src\\\\screens\\\\login\\\\login-screen.jsx\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation create($login: String!, $password: String!, $nick: String!) {\\n    UserUpsert(user: { login: $login, password: $password, nick: $nick }) {\\n      login\\n      nick\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport Toggle from \"react-toggle\";\nimport { Redirect } from \"react-router-dom\";\nimport \"react-toggle/style.css\";\nimport API from \"./../../API\";\nimport { gql } from \"graphql-request\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../../shared/components/spinner\";\nimport { login } from \"./../../services/auth\";\nvar createMutation = gql(_templateObject());\n\nvar CreateUserForm = function CreateUserForm() {\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      values = _React$useState2[0],\n      setValues = _React$useState2[1];\n\n  var onSubmit = function onSubmit(e) {\n    e.preventDefault();\n    API.request(createMutation, values).then(console.log);\n  };\n\n  var onChange = function onChange(e) {\n    var target = e.target;\n    setValues(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        [target.name]: target.value\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    placeholder: \"Login\",\n    name: \"login\",\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"col-sm-2 col-form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, \"Nick\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Nick\",\n    name: \"nick\",\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"col-sm-2 col-form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control\",\n    placeholder: \"Password\",\n    name: \"password\",\n    onChange: onChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, \"Create\"));\n};\n\nvar LoginForm = function LoginForm(_ref) {\n  var dispatch = _ref.dispatch;\n\n  var _React$useState3 = React.useState({}),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      values = _React$useState4[0],\n      setValues = _React$useState4[1];\n\n  var onSubmit = function onSubmit(e) {\n    e.preventDefault();\n    dispatch(login(values));\n  };\n\n  var onChange = function onChange(e) {\n    var target = e.target;\n    setValues(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        [target.name]: target.value\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"login\",\n    onChange: onChange,\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: onChange,\n    name: \"password\",\n    type: \"password\",\n    className: \"form-control\",\n    placeholder: \"Password\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, \"Create\"));\n};\n\nvar Login = function Login(_ref2) {\n  var dispatch = _ref2.dispatch,\n      authStatus = _ref2.authStatus;\n\n  var _React$useState5 = React.useState(true),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      isNewUser = _React$useState6[0],\n      setNewUser = _React$useState6[1];\n\n  if (authStatus === \"resolved\") {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, isNewUser ? \"Login\" : \"Registration\", \" \"), /*#__PURE__*/React.createElement(Toggle, {\n    checked: isNewUser,\n    onChange: function onChange(e) {\n      return setNewUser(function (p) {\n        return !p;\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 col-md-5 mx-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, isNewUser ? /*#__PURE__*/React.createElement(LoginForm, {\n    dispatch: dispatch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 22\n    }\n  }) : /*#__PURE__*/React.createElement(CreateUserForm, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 58\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"my-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, authStatus === \"pending\" ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 37\n    }\n  }) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, authStatus === \"rejected\" ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, \"Something went wrong\") : null));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLoggedIn: state.auth.isLoggedIn,\n    authStatus: state.auth.status\n  };\n};\n\nexport default connect(mapStateToProps)(Login);","map":{"version":3,"sources":["K:/ALevel/REACT/shop-project/src/screens/login/login-screen.jsx"],"names":["React","Toggle","Redirect","API","gql","connect","Spinner","login","createMutation","CreateUserForm","useState","values","setValues","onSubmit","e","preventDefault","request","then","console","log","onChange","target","prev","name","value","LoginForm","dispatch","Login","authStatus","isNewUser","setNewUser","p","mapStateToProps","state","isLoggedIn","auth","status"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Toggle from \"react-toggle\";\nimport { Redirect } from \"react-router-dom\";\nimport \"react-toggle/style.css\";\nimport API from \"./../../API\";\nimport { gql } from \"graphql-request\";\nimport { connect } from \"react-redux\";\nimport Spinner from \"../../shared/components/spinner\";\nimport { login } from \"./../../services/auth\";\nconst createMutation = gql`\n  mutation create($login: String!, $password: String!, $nick: String!) {\n    UserUpsert(user: { login: $login, password: $password, nick: $nick }) {\n      login\n      nick\n    }\n  }\n`;\nconst CreateUserForm = () => {\n  const [values, setValues] = React.useState({});\n  const onSubmit = (e) => {\n    e.preventDefault();\n    API.request(createMutation, values).then(console.log);\n  };\n\n  const onChange = (e) => {\n    const target = e.target;\n    setValues((prev) => ({\n      ...prev,\n      [target.name]: target.value\n    }));\n  };\n  return (\n    <form onSubmit={onSubmit}>\n      <div className=\"form-group row\">\n        <label className=\"col-sm-2 col-form-label\">Login</label>\n        <div className=\"col-sm-10\">\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"Login\"\n            name=\"login\"\n            onChange={onChange}\n          />\n        </div>\n      </div>\n      <div className=\"form-group row\">\n        <label class=\"col-sm-2 col-form-label\">Nick</label>\n        <div className=\"col-sm-10\">\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Nick\"\n            name=\"nick\"\n            onChange={onChange}\n          />\n        </div>\n      </div>\n      <div className=\"form-group row\">\n        <label class=\"col-sm-2 col-form-label\">Password</label>\n        <div className=\"col-sm-10\">\n          <input\n            type=\"password\"\n            className=\"form-control\"\n            placeholder=\"Password\"\n            name=\"password\"\n            onChange={onChange}\n          />\n        </div>\n      </div>\n      <button className=\"btn btn-primary\">Create</button>\n    </form>\n  );\n};\n\nconst LoginForm = ({ dispatch }) => {\n  const [values, setValues] = React.useState({});\n  const onSubmit = (e) => {\n    e.preventDefault();\n    dispatch(login(values));\n  };\n\n  const onChange = (e) => {\n    const target = e.target;\n    setValues((prev) => ({\n      ...prev,\n      [target.name]: target.value\n    }));\n  };\n  return (\n    <form onSubmit={onSubmit}>\n      <div className=\"form-group\">\n        <label>Login</label>\n        <input\n          name=\"login\"\n          onChange={onChange}\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Login\"\n        />\n      </div>\n      <div className=\"form-group\">\n        <label>Password</label>\n        <input\n          onChange={onChange}\n          name=\"password\"\n          type=\"password\"\n          className=\"form-control\"\n          placeholder=\"Password\"\n        />\n      </div>\n\n      <button type=\"submit\" className=\"btn btn-primary\">\n        Create\n      </button>\n    </form>\n  );\n};\n\nconst Login = ({ dispatch, authStatus }) => {\n  const [isNewUser, setNewUser] = React.useState(true);\n\n  if (authStatus === \"resolved\") {\n    return <Redirect to=\"/\" />;\n  }\n  return (\n    <div>\n      <div className=\"d-flex align-items-center justify-content-center\">\n        <h1>{isNewUser ? \"Login\" : \"Registration\"} </h1>\n        <Toggle checked={isNewUser} onChange={(e) => setNewUser((p) => !p)} />\n      </div>\n      <div className=\"col-sm-12 col-md-5 mx-auto\">\n        {isNewUser ? <LoginForm dispatch={dispatch} /> : <CreateUserForm />}\n      </div>\n      <div className=\"my-3\">\n        {authStatus === \"pending\" ? <Spinner /> : null}\n      </div>\n      <div className=\"mt-2\">\n        {authStatus === \"rejected\" ? (\n          <span className=\"text-danger\">Something went wrong</span>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  isLoggedIn: state.auth.isLoggedIn,\n  authStatus: state.auth.status\n});\nexport default connect(mapStateToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}